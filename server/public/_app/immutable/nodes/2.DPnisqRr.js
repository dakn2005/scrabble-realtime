import{s as wt,e as u,b as E,t as Q,d as f,f as k,p as B,j as y,i as p,h as W,q as o,r as G,v as nt,w as Je,k as X,l as s,x as Le,y as F,n as ie,z as Tt,A as Et,o as he,B as yt,C as ge,D as Lt,m as st,E as ot}from"../chunks/scheduler.e88Tslnl.js";import{S as Ct,i as St,c as rt,b as it,m as ct,t as ut,a as ft,d as _t}from"../chunks/index.a8bmwSpJ.js";import{e as Ne,u as Nt,s as Ke,a as ze,r as pt,m as mt,d as Ot,t as de,S as Pt,l as At}from"../chunks/app.DLNTIJ9z.js";import{g as It}from"../chunks/entry.xYKiO4dS.js";let Ve="",dt={sheng:"Sheng + Swahili",swa:"Swahili",en:"English"};function ht(a,t,e){const l=a.slice();return l[24]=t[e],l}function gt(a,t,e){const l=a.slice();return l[27]=t[e],l}function bt(a){let t,e,l='<i class="fa-solid fa-share-nodes"></i>',r,i;return{c(){t=u("span"),e=u("button"),e.innerHTML=l,this.h()},l(m){t=f(m,"SPAN",{class:!0});var d=k(t);e=f(d,"BUTTON",{"data-svelte-h":!0}),B(e)!=="svelte-102yhk5"&&(e.innerHTML=l),d.forEach(p),this.h()},h(){o(t,"class","text-xs text-amber-400 italic")},m(m,d){X(m,t,d),s(t,e),r||(i=F(e,"click",a[8]),r=!0)},p:ie,d(m){m&&p(t),r=!1,i()}}}function vt(a,t){let e,l=t[27].name+"",r,i,m=t[27].lang+"",d,L,N;return{key:a,first:null,c(){e=u("option"),r=Q(l),i=Q(" ("),d=Q(m),L=Q(")"),this.h()},l(h){e=f(h,"OPTION",{});var v=k(e);r=W(v,l),i=W(v," ("),d=W(v,m),L=W(v,")"),v.forEach(p),this.h()},h(){e.__value=N=t[27].name+"|"+t[27].lang,G(e,e.__value),this.first=e},m(h,v){X(h,e,v),s(e,r),s(e,i),s(e,d),s(e,L)},p(h,v){t=h,v&32&&l!==(l=t[27].name+"")&&st(r,l),v&32&&m!==(m=t[27].lang+"")&&st(d,m),v&32&&N!==(N=t[27].name+"|"+t[27].lang)&&(e.__value=N,G(e,e.__value))},d(h){h&&p(e)}}}function kt(a){let t,e=a[24]+"",l;return{c(){t=u("option"),l=Q(e),this.h()},l(r){t=f(r,"OPTION",{});var i=k(t);l=W(i,e),i.forEach(p),this.h()},h(){t.__value=a[24],G(t,t.__value)},m(r,i){X(r,t,i),s(t,l)},p:ie,d(r){r&&p(t)}}}function xt(a){let t;return{c(){t=Q("Save")},l(e){t=W(e,"Save")},m(e,l){X(e,t,l)},p:ie,d(e){e&&p(t)}}}function Ut(a){let t,e;return{c(){t=u("span"),this.h()},l(l){t=f(l,"SPAN",{class:!0}),k(t).forEach(p),this.h()},h(){o(t,"class",e="loading loading-spinner loading-xs "+(a[7]?"visible":"invisible"))},m(l,r){X(l,t,r)},p(l,r){r&128&&e!==(e="loading loading-spinner loading-xs "+(l[7]?"visible":"invisible"))&&o(t,"class",e)},d(l){l&&p(t)}}}function Mt(a){let t;return{c(){t=Q("Save & Join")},l(e){t=W(e,"Save & Join")},m(e,l){X(e,t,l)},p:ie,d(e){e&&p(t)}}}function jt(a){let t,e;return{c(){t=u("span"),this.h()},l(l){t=f(l,"SPAN",{class:!0}),k(t).forEach(p),this.h()},h(){o(t,"class",e="loading loading-spinner loading-xs "+(a[7]?"visible":"invisible"))},m(l,r){X(l,t,r)},p(l,r){r&128&&e!==(e="loading loading-spinner loading-xs "+(l[7]?"visible":"invisible"))&&o(t,"class",e)},d(l){l&&p(t)}}}function Ht(a){let t,e,l,r="Karibu",i,m,d,L='<i class="fa-regular fa-user"></i>',N,h,v,A,K,C,I,be="-- Select Game --",P=[],_e=new Map,le,M,pe,Y,ce,me,D,Oe='<i class="fa-solid fa-plus"></i> New Game',b,w,g,O,ue='<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>',Pe,ae,Fe="+ Add",Ae,Z,ne,Qe="username",Ie,R,xe,$,se,We="Game Name",Ue,q,Me,x,V,Xe="-- Select language --",je,ee,J,He,z,Be,te,Ye="<button>close</button>",Ge,Ze,T=a[1]&&bt(a),ve=Ne(a[5]);const $e=n=>n[27].id;for(let n=0;n<ve.length;n+=1){let _=gt(a,ve,n),c=$e(_);_e.set(c,P[n]=vt(c,_))}let fe=Ne(Object.values(dt)),S=[];for(let n=0;n<fe.length;n+=1)S[n]=kt(ht(a,fe,n));function et(n,_){return n[7]?Ut:xt}let ke=et(a),j=ke(a);function tt(n,_){return n[7]?jt:Mt}let we=tt(a),H=we(a);return{c(){t=u("div"),e=u("div"),l=u("span"),l.textContent=r,i=E(),m=u("label"),d=u("span"),d.innerHTML=L,N=E(),h=u("input"),v=E(),A=u("label"),T&&T.c(),K=E(),C=u("select"),I=u("option"),I.textContent=be;for(let n=0;n<P.length;n+=1)P[n].c();le=E(),M=u("button"),pe=Q(`Join Game
      `),Y=u("span"),me=E(),D=u("button"),D.innerHTML=Oe,b=E(),w=u("dialog"),g=u("div"),O=u("form"),O.innerHTML=ue,Pe=E(),ae=u("h3"),ae.textContent=Fe,Ae=E(),Z=u("label"),ne=u("span"),ne.textContent=Qe,Ie=E(),R=u("input"),xe=E(),$=u("label"),se=u("span"),se.textContent=We,Ue=E(),q=u("input"),Me=E(),x=u("select"),V=u("option"),V.textContent=Xe;for(let n=0;n<S.length;n+=1)S[n].c();je=E(),ee=u("div"),J=u("button"),j.c(),He=Q(`
           
          `),z=u("button"),H.c(),Be=E(),te=u("form"),te.innerHTML=Ye,this.h()},l(n){t=f(n,"DIV",{class:!0,style:!0});var _=k(t);e=f(_,"DIV",{class:!0});var c=k(e);l=f(c,"SPAN",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-19gzkk1"&&(l.textContent=r),i=y(c),m=f(c,"LABEL",{class:!0});var oe=k(m);d=f(oe,"SPAN",{class:!0,"data-svelte-h":!0}),B(d)!=="svelte-qxxlbp"&&(d.innerHTML=L),N=y(oe),h=f(oe,"INPUT",{type:!0,class:!0,placeholder:!0}),oe.forEach(p),v=y(c),A=f(c,"LABEL",{class:!0});var Ce=k(A);T&&T.l(Ce),K=y(Ce),C=f(Ce,"SELECT",{class:!0});var De=k(C);I=f(De,"OPTION",{"data-svelte-h":!0}),B(I)!=="svelte-7ry8ge"&&(I.textContent=be);for(let re=0;re<P.length;re+=1)P[re].l(De);De.forEach(p),Ce.forEach(p),le=y(c),M=f(c,"BUTTON",{class:!0,style:!0});var Re=k(M);pe=W(Re,`Join Game
      `),Y=f(Re,"SPAN",{class:!0}),k(Y).forEach(p),Re.forEach(p),me=y(c),D=f(c,"BUTTON",{class:!0,style:!0,onclick:!0,"data-svelte-h":!0}),B(D)!=="svelte-2gb43q"&&(D.innerHTML=Oe),b=y(c),w=f(c,"DIALOG",{id:!0,class:!0});var Se=k(w);g=f(Se,"DIV",{class:!0});var U=k(g);O=f(U,"FORM",{method:!0,"data-svelte-h":!0}),B(O)!=="svelte-9ixgud"&&(O.innerHTML=ue),Pe=y(U),ae=f(U,"H3",{class:!0,"data-svelte-h":!0}),B(ae)!=="svelte-1krkdrr"&&(ae.textContent=Fe),Ae=y(U),Z=f(U,"LABEL",{class:!0});var Te=k(Z);ne=f(Te,"SPAN",{class:!0,"data-svelte-h":!0}),B(ne)!=="svelte-14xbfz6"&&(ne.textContent=Qe),Ie=y(Te),R=f(Te,"INPUT",{type:!0,class:!0,placeholder:!0}),Te.forEach(p),xe=y(U),$=f(U,"LABEL",{class:!0});var Ee=k($);se=f(Ee,"SPAN",{class:!0,"data-svelte-h":!0}),B(se)!=="svelte-1hrenzd"&&(se.textContent=We),Ue=y(Ee),q=f(Ee,"INPUT",{type:!0,class:!0,placeholder:!0}),Ee.forEach(p),Me=y(U),x=f(U,"SELECT",{class:!0});var qe=k(x);V=f(qe,"OPTION",{"data-svelte-h":!0}),B(V)!=="svelte-1ogokao"&&(V.textContent=Xe);for(let re=0;re<S.length;re+=1)S[re].l(qe);qe.forEach(p),je=y(U),ee=f(U,"DIV",{class:!0});var ye=k(ee);J=f(ye,"BUTTON",{class:!0});var lt=k(J);j.l(lt),lt.forEach(p),He=W(ye,`
           
          `),z=f(ye,"BUTTON",{class:!0});var at=k(z);H.l(at),at.forEach(p),ye.forEach(p),U.forEach(p),Be=y(Se),te=f(Se,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),B(te)!=="svelte-vg3lbk"&&(te.innerHTML=Ye),Se.forEach(p),c.forEach(p),_.forEach(p),this.h()},h(){o(l,"class","m-auto text-4xl uppercase text-white"),o(d,"class","text-xs text-amber-400 italic"),o(h,"type","text"),o(h,"class","grow"),o(h,"placeholder","e.g. Kimana"),o(m,"class","input input-bordered input-md flex items-center gap-2"),I.__value="",G(I,I.__value),o(C,"class","select select-md w-full outline-none focus:outline-none focus:ring-0"),a[1]===void 0&&nt(()=>a[12].call(C)),o(A,"class","input input-bordered input-md flex items-center gap-2"),o(Y,"class",ce="loading loading-spinner loading-xs "+(a[6]?"visible":"invisible")),o(M,"class","btn btn-neutral w-full"),Je(M,"width","100%"),o(D,"class","btn btn-outline btn-warning w-full"),Je(D,"width","100%"),o(D,"onclick","new_game_modal.showModal()"),o(O,"method","dialog"),o(ae,"class","text-lg font-bold mb-4"),o(ne,"class","text-xs italic text-amber-400"),o(R,"type","text"),o(R,"class","grow"),o(R,"placeholder","e.g. Kimana"),o(Z,"class","input input-bordered input-md flex items-center gap-2 mb-3"),o(se,"class","text-xs italic text-amber-400"),o(q,"type","text"),o(q,"class","grow text-lg"),o(q,"placeholder","unique game name"),o($,"class","input input-bordered input-md flex items-center gap-2 mb-4"),V.__value="-- Select language --",G(V,V.__value),o(x,"class","select select-bordered select-md w-full mb-4"),a[4]===void 0&&nt(()=>a[15].call(x)),o(J,"class","btn btn-outline btn-warning w-1/3 disabled:btn-disabled"),J.disabled=a[7],o(z,"class","btn btn-warning w-2/3"),z.disabled=a[7],o(ee,"class","flex flex-row"),o(g,"class","modal-box"),o(te,"method","dialog"),o(te,"class","modal-backdrop"),o(w,"id","new_game_modal"),o(w,"class","modal"),o(e,"class","card bg-slate-700 w-96 shadow-xl p-10 space-y-5 m-auto mt-48"),o(t,"class","w-full"),Je(t,"background-color","#fbf7f6")},m(n,_){X(n,t,_),s(t,e),s(e,l),s(e,i),s(e,m),s(m,d),s(m,N),s(m,h),G(h,a[0]),s(e,v),s(e,A),T&&T.m(A,null),s(A,K),s(A,C),s(C,I);for(let c=0;c<P.length;c+=1)P[c]&&P[c].m(C,null);Le(C,a[1],!0),s(e,le),s(e,M),s(M,pe),s(M,Y),s(e,me),s(e,D),s(e,b),s(e,w),s(w,g),s(g,O),s(g,Pe),s(g,ae),s(g,Ae),s(g,Z),s(Z,ne),s(Z,Ie),s(Z,R),G(R,a[2]),s(g,xe),s(g,$),s($,se),s($,Ue),s($,q),G(q,a[3]),s(g,Me),s(g,x),s(x,V);for(let c=0;c<S.length;c+=1)S[c]&&S[c].m(x,null);Le(x,a[4],!0),s(g,je),s(g,ee),s(ee,J),j.m(J,null),s(ee,He),s(ee,z),H.m(z,null),s(w,Be),s(w,te),Ge||(Ze=[F(h,"input",a[11]),F(C,"change",a[12]),F(M,"click",a[9]),F(R,"input",a[13]),F(q,"input",a[14]),F(x,"change",a[15]),F(J,"click",a[16]),F(z,"click",a[17])],Ge=!0)},p(n,[_]){if(_&1&&h.value!==n[0]&&G(h,n[0]),n[1]?T?T.p(n,_):(T=bt(n),T.c(),T.m(A,K)):T&&(T.d(1),T=null),_&32&&(ve=Ne(n[5]),P=Nt(P,_,$e,1,n,ve,_e,C,Ot,vt,null,gt)),_&34&&Le(C,n[1]),_&64&&ce!==(ce="loading loading-spinner loading-xs "+(n[6]?"visible":"invisible"))&&o(Y,"class",ce),_&4&&R.value!==n[2]&&G(R,n[2]),_&8&&q.value!==n[3]&&G(q,n[3]),_&0){fe=Ne(Object.values(dt));let c;for(c=0;c<fe.length;c+=1){const oe=ht(n,fe,c);S[c]?S[c].p(oe,_):(S[c]=kt(oe),S[c].c(),S[c].m(x,null))}for(;c<S.length;c+=1)S[c].d(1);S.length=fe.length}_&16&&Le(x,n[4]),ke===(ke=et(n))&&j?j.p(n,_):(j.d(1),j=ke(n),j&&(j.c(),j.m(J,null))),_&128&&(J.disabled=n[7]),we===(we=tt(n))&&H?H.p(n,_):(H.d(1),H=we(n),H&&(H.c(),H.m(z,null))),_&128&&(z.disabled=n[7])},i:ie,o:ie,d(n){n&&p(t),T&&T.d();for(let _=0;_<P.length;_+=1)P[_].d();Tt(S,n),j.d(),H.d(),Ge=!1,Et(Ze)}}}let Bt=!0;function Gt(a,t,e){let l,r,i,m;he(a,Ke,b=>e(19,l=b)),he(a,ze,b=>e(20,r=b)),he(a,pt,b=>e(21,i=b)),he(a,mt,b=>e(22,m=b));let d="",L,N="",h="",v,A=[],K=!1,C=!1,I;yt(()=>{if(be(),Object.keys(r).length>0){let{username:g,game:O}=r;l==null||l.emit("leave_game",{username:g,gameName:O==null?void 0:O.name,recoverTiles:i}),ge(ze,r={},r),ge(mt,m=[],m),ge(pt,i=null,i)}let b=decodeURIComponent(location.search);if(new URLSearchParams(b).has("game")){let g=b.split("=");e(1,L=g[1].replaceAll("'",""))}}),Lt(()=>{clearInterval(I)});function be(){clearInterval(I);const b=async()=>{const w=await fetch(Ve+"/api/games");e(5,A=await w.json())};I=setInterval(b,15e3),b()}function P(){let b=`https://api.whatsapp.com/send?text=${location.origin}?game='${encodeURIComponent(L)}'`,w=location.origin+"?game='"+encodeURIComponent(L)+"'";navigator.canShare()?navigator.share(w):window.open(b,"_blank")}const _e=b=>{e(6,K=!0);let[w,g]=L.split("|");if(w==""||d=="")de.error("Please select a game and enter a username"),e(6,K=!1);else{e(0,d=d.charAt(0).toUpperCase()+d.slice(1));let O={username:d,game:{name:w,lang:g}};ge(ze,r=O,r),l.emit("join_game",{username:O.username,game:O.game}),l.on("join_reply",ue=>{ue.status=="fail"?(de.error(ue.message),e(6,K=!1)):ue.status=="success"&&It("/game")})}},le=async b=>{if(e(7,C=!0),N==""||h==""){de.error("Please enter a username and game name"),e(7,C=!1);return}e(0,d=N.charAt(0).toUpperCase()+N.slice(1)),e(3,h=h.charAt(0).toUpperCase()+h.slice(1)),e(1,L=`${h}|${v}`);try{let g=await(await fetch(Ve+"/api/games/add",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:h,created_by:d,lang:v,use_scrabble_dictionary:Bt})})).json();g.status=="fail"?de.warning(g.error):(b&&_e(),document.querySelector(".modal-backdrop>button").click()),e(7,C=!1)}catch{de.error("Error Communicating with the Server")}};function M(){d=this.value,e(0,d)}function pe(){L=ot(this),e(1,L),e(5,A)}function Y(){N=this.value,e(2,N)}function ce(){h=this.value,e(3,h)}function me(){v=ot(this),e(4,v)}return[d,L,N,h,v,A,K,C,P,_e,le,M,pe,Y,ce,me,()=>le(),()=>le(!0)]}class Dt extends Ct{constructor(t){super(),St(this,t,Gt,Ht,wt,{})}}function Rt(a){let t,e,l,r;return t=new Pt({props:{richColors:!0,position:"bottom-center"}}),l=new Dt({}),{c(){rt(t.$$.fragment),e=E(),rt(l.$$.fragment)},l(i){it(t.$$.fragment,i),e=y(i),it(l.$$.fragment,i)},m(i,m){ct(t,i,m),X(i,e,m),ct(l,i,m),r=!0},p:ie,i(i){r||(ut(t.$$.fragment,i),ut(l.$$.fragment,i),r=!0)},o(i){ft(t.$$.fragment,i),ft(l.$$.fragment,i),r=!1},d(i){i&&p(e),_t(t,i),_t(l,i)}}}function qt(a,t,e){let l;return he(a,Ke,r=>e(0,l=r)),ge(Ke,l=At.connect(Ve,{transports:["websocket","polling"]}),l),[]}class Ft extends Ct{constructor(t){super(),St(this,t,qt,Rt,wt,{})}}export{Ft as component};
