import{s as ft,e as u,b as T,t as ne,d as m,f as w,p as U,j as S,i as d,h as re,q as o,r as G,v as We,w as we,k as pe,l,x as Ce,y as le,n as xe,z as _t,A as dt,o as me,B as gt,C as fe,D as bt,m as Xe,E as Ye}from"../chunks/scheduler.e88Tslnl.js";import{S as pt,i as ht,c as Ze,b as $e,m as et,t as tt,a as lt,d as at}from"../chunks/index.a8bmwSpJ.js";import{e as ke,u as vt,s as Ge,a as Ue,r as st,m as nt,d as wt,t as ue,S as Ct,l as kt}from"../chunks/app.PNMyi7ry.js";import{g as xt}from"../chunks/entry.VyS27ZRq.js";let He="",rt={sheng:"Sheng + Swahili",swa:"Swahili",en:"English"};function ot(s,t,e){const a=s.slice();return a[20]=t[e],a}function it(s,t,e){const a=s.slice();return a[23]=t[e],a}function ct(s){let t,e,a,c;return{c(){t=u("span"),e=u("a"),a=u("i"),this.h()},l(n){t=m(n,"SPAN",{class:!0});var f=w(t);e=m(f,"A",{href:!0});var h=w(e);a=m(h,"I",{class:!0}),w(a).forEach(d),h.forEach(d),f.forEach(d),this.h()},h(){o(a,"class","fa-solid fa-share-nodes"),o(e,"href",c="https://api.whatsapp.com/send?text="+(location.origin+"?game="+s[1])),o(t,"class","text-xs text-amber-400 italic")},m(n,f){pe(n,t,f),l(t,e),l(e,a)},p(n,f){f&34&&c!==(c="https://api.whatsapp.com/send?text="+(location.origin+"?game="+n[1]))&&o(e,"href",c)},d(n){n&&d(t)}}}function ut(s,t){let e,a=t[23].name+"",c,n,f=t[23].lang+"",h,N,y;return{key:s,first:null,c(){e=u("option"),c=ne(a),n=ne(" ("),h=ne(f),N=ne(")"),this.h()},l(p){e=m(p,"OPTION",{});var g=w(e);c=re(g,a),n=re(g," ("),h=re(g,f),N=re(g,")"),g.forEach(d),this.h()},h(){e.__value=y=t[23].name+"|"+t[23].lang,G(e,e.__value),this.first=e},m(p,g){pe(p,e,g),l(e,c),l(e,n),l(e,h),l(e,N)},p(p,g){t=p,g&32&&a!==(a=t[23].name+"")&&Xe(c,a),g&32&&f!==(f=t[23].lang+"")&&Xe(h,f),g&32&&y!==(y=t[23].name+"|"+t[23].lang)&&(e.__value=y,G(e,e.__value))},d(p){p&&d(e)}}}function mt(s){let t,e=s[20]+"",a;return{c(){t=u("option"),a=ne(e),this.h()},l(c){t=m(c,"OPTION",{});var n=w(t);a=re(n,e),n.forEach(d),this.h()},h(){t.__value=s[20],G(t,t.__value)},m(c,n){pe(c,t,n),l(t,a)},p:xe,d(c){c&&d(t)}}}function Et(s){let t,e,a,c="Karibu",n,f,h,N='<i class="fa-regular fa-user"></i>',y,p,g,O,D,k,M,oe="-- Select Game --",L=[],he=new Map,ie,j,ce,K,b,P,v,ae='<i class="fa-solid fa-plus"></i> New Game',Q,q,x,W,Be='<button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>',Ee,X,De="+ Add",Te,F,Y,qe="username",Se,H,ye,J,Z,Re="Game Name",Le,B,Ne,A,R,ze="-- Select language --",Oe,$,z,Ke="Save",Pe,V,Fe="<button>close</button>",Ae,Je,E=s[1]&&ct(s),_e=ke(s[5]);const Ve=r=>r[23].id;for(let r=0;r<_e.length;r+=1){let _=it(s,_e,r),i=Ve(_);he.set(i,L[r]=ut(i,_))}let se=ke(Object.values(rt)),C=[];for(let r=0;r<se.length;r+=1)C[r]=mt(ot(s,se,r));return{c(){t=u("div"),e=u("div"),a=u("span"),a.textContent=c,n=T(),f=u("label"),h=u("span"),h.innerHTML=N,y=T(),p=u("input"),g=T(),O=u("label"),E&&E.c(),D=T(),k=u("select"),M=u("option"),M.textContent=oe;for(let r=0;r<L.length;r+=1)L[r].c();ie=T(),j=u("button"),ce=ne(`Join Game
      `),K=u("span"),P=T(),v=u("button"),v.innerHTML=ae,Q=T(),q=u("dialog"),x=u("div"),W=u("form"),W.innerHTML=Be,Ee=T(),X=u("h3"),X.textContent=De,Te=T(),F=u("label"),Y=u("span"),Y.textContent=qe,Se=T(),H=u("input"),ye=T(),J=u("label"),Z=u("span"),Z.textContent=Re,Le=T(),B=u("input"),Ne=T(),A=u("select"),R=u("option"),R.textContent=ze;for(let r=0;r<C.length;r+=1)C[r].c();Oe=T(),$=u("form"),z=u("button"),z.textContent=Ke,Pe=T(),V=u("form"),V.innerHTML=Fe,this.h()},l(r){t=m(r,"DIV",{class:!0,style:!0});var _=w(t);e=m(_,"DIV",{class:!0});var i=w(e);a=m(i,"SPAN",{class:!0,"data-svelte-h":!0}),U(a)!=="svelte-19gzkk1"&&(a.textContent=c),n=S(i),f=m(i,"LABEL",{class:!0});var ee=w(f);h=m(ee,"SPAN",{class:!0,"data-svelte-h":!0}),U(h)!=="svelte-qxxlbp"&&(h.innerHTML=N),y=S(ee),p=m(ee,"INPUT",{type:!0,class:!0,placeholder:!0}),ee.forEach(d),g=S(i),O=m(i,"LABEL",{class:!0});var de=w(O);E&&E.l(de),D=S(de),k=m(de,"SELECT",{class:!0});var Ie=w(k);M=m(Ie,"OPTION",{"data-svelte-h":!0}),U(M)!=="svelte-7ry8ge"&&(M.textContent=oe);for(let te=0;te<L.length;te+=1)L[te].l(Ie);Ie.forEach(d),de.forEach(d),ie=S(i),j=m(i,"BUTTON",{class:!0,style:!0});var Me=w(j);ce=re(Me,`Join Game
      `),K=m(Me,"SPAN",{class:!0}),w(K).forEach(d),Me.forEach(d),P=S(i),v=m(i,"BUTTON",{class:!0,style:!0,onclick:!0,"data-svelte-h":!0}),U(v)!=="svelte-2gb43q"&&(v.innerHTML=ae),Q=S(i),q=m(i,"DIALOG",{id:!0,class:!0});var ge=w(q);x=m(ge,"DIV",{class:!0});var I=w(x);W=m(I,"FORM",{method:!0,"data-svelte-h":!0}),U(W)!=="svelte-9ixgud"&&(W.innerHTML=Be),Ee=S(I),X=m(I,"H3",{class:!0,"data-svelte-h":!0}),U(X)!=="svelte-1krkdrr"&&(X.textContent=De),Te=S(I),F=m(I,"LABEL",{class:!0});var be=w(F);Y=m(be,"SPAN",{class:!0,"data-svelte-h":!0}),U(Y)!=="svelte-14xbfz6"&&(Y.textContent=qe),Se=S(be),H=m(be,"INPUT",{type:!0,class:!0,placeholder:!0}),be.forEach(d),ye=S(I),J=m(I,"LABEL",{class:!0});var ve=w(J);Z=m(ve,"SPAN",{class:!0,"data-svelte-h":!0}),U(Z)!=="svelte-1hrenzd"&&(Z.textContent=Re),Le=S(ve),B=m(ve,"INPUT",{type:!0,class:!0,placeholder:!0}),ve.forEach(d),Ne=S(I),A=m(I,"SELECT",{class:!0});var je=w(A);R=m(je,"OPTION",{"data-svelte-h":!0}),U(R)!=="svelte-1ogokao"&&(R.textContent=ze);for(let te=0;te<C.length;te+=1)C[te].l(je);je.forEach(d),Oe=S(I),$=m(I,"FORM",{method:!0,class:!0});var Qe=w($);z=m(Qe,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),U(z)!=="svelte-1x4ypib"&&(z.textContent=Ke),Qe.forEach(d),I.forEach(d),Pe=S(ge),V=m(ge,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),U(V)!=="svelte-vg3lbk"&&(V.innerHTML=Fe),ge.forEach(d),i.forEach(d),_.forEach(d),this.h()},h(){o(a,"class","m-auto text-4xl uppercase text-white"),o(h,"class","text-xs text-amber-400 italic"),o(p,"type","text"),o(p,"class","grow"),o(p,"placeholder","e.g. Kimana"),o(f,"class","input input-bordered input-md flex items-center gap-2"),M.__value="",G(M,M.__value),o(k,"class","select select-md w-full max-w-xs"),s[1]===void 0&&We(()=>s[10].call(k)),o(O,"class","input input-bordered input-md flex items-center gap-2"),o(K,"class",b="loading loading-spinner loading-xs "+(s[6]?"visible":"invisible")),o(j,"class","btn btn-neutral w-full"),we(j,"width","100%"),o(v,"class","btn btn-outline btn-warning w-full"),we(v,"width","100%"),o(v,"onclick","new_game_modal.showModal()"),o(W,"method","dialog"),o(X,"class","text-lg font-bold mb-4"),o(Y,"class","text-xs italic text-amber-400"),o(H,"type","text"),o(H,"class","grow"),o(H,"placeholder","e.g. Kimana"),o(F,"class","input input-bordered input-md flex items-center gap-2 mb-3"),o(Z,"class","text-xs italic text-amber-400"),o(B,"type","text"),o(B,"class","grow text-lg"),o(B,"placeholder","unique game name"),o(J,"class","input input-bordered input-md flex items-center gap-2 mb-4"),R.__value="-- Select language --",G(R,R.__value),o(A,"class","select select-bordered select-md w-full mb-4"),s[4]===void 0&&We(()=>s[13].call(A)),o(z,"class","btn btn-warning w-full"),we(z,"width","100%"),o($,"method","dialog"),o($,"class","modal-backdrop"),o(x,"class","modal-box"),o(V,"method","dialog"),o(V,"class","modal-backdrop"),o(q,"id","new_game_modal"),o(q,"class","modal"),o(e,"class","card bg-slate-700 w-96 shadow-xl p-10 space-y-5 m-auto mt-48"),o(t,"class","w-full"),we(t,"background-color","#fbf7f6")},m(r,_){pe(r,t,_),l(t,e),l(e,a),l(e,n),l(e,f),l(f,h),l(f,y),l(f,p),G(p,s[0]),l(e,g),l(e,O),E&&E.m(O,null),l(O,D),l(O,k),l(k,M);for(let i=0;i<L.length;i+=1)L[i]&&L[i].m(k,null);Ce(k,s[1],!0),l(e,ie),l(e,j),l(j,ce),l(j,K),l(e,P),l(e,v),l(e,Q),l(e,q),l(q,x),l(x,W),l(x,Ee),l(x,X),l(x,Te),l(x,F),l(F,Y),l(F,Se),l(F,H),G(H,s[2]),l(x,ye),l(x,J),l(J,Z),l(J,Le),l(J,B),G(B,s[3]),l(x,Ne),l(x,A),l(A,R);for(let i=0;i<C.length;i+=1)C[i]&&C[i].m(A,null);Ce(A,s[4],!0),l(x,Oe),l(x,$),l($,z),l(q,Pe),l(q,V),Ae||(Je=[le(p,"input",s[9]),le(k,"change",s[10]),le(j,"click",s[7]),le(H,"input",s[11]),le(B,"input",s[12]),le(A,"change",s[13]),le(z,"click",s[8])],Ae=!0)},p(r,[_]){if(_&1&&p.value!==r[0]&&G(p,r[0]),r[1]?E?E.p(r,_):(E=ct(r),E.c(),E.m(O,D)):E&&(E.d(1),E=null),_&32&&(_e=ke(r[5]),L=vt(L,_,Ve,1,r,_e,he,k,wt,ut,null,it)),_&34&&Ce(k,r[1]),_&64&&b!==(b="loading loading-spinner loading-xs "+(r[6]?"visible":"invisible"))&&o(K,"class",b),_&4&&H.value!==r[2]&&G(H,r[2]),_&8&&B.value!==r[3]&&G(B,r[3]),_&0){se=ke(Object.values(rt));let i;for(i=0;i<se.length;i+=1){const ee=ot(r,se,i);C[i]?C[i].p(ee,_):(C[i]=mt(ee),C[i].c(),C[i].m(A,null))}for(;i<C.length;i+=1)C[i].d(1);C.length=se.length}_&16&&Ce(A,r[4])},i:xe,o:xe,d(r){r&&d(t),E&&E.d();for(let _=0;_<L.length;_+=1)L[_].d();_t(C,r),Ae=!1,dt(Je)}}}let Tt=!0;function St(s,t,e){let a,c,n,f;me(s,Ge,b=>e(15,a=b)),me(s,Ue,b=>e(16,c=b)),me(s,st,b=>e(17,n=b)),me(s,nt,b=>e(18,f=b));let h="",N,y="",p="",g,O=[],D=!1,k;gt(()=>{if(M(),Object.keys(c).length>0){let{username:P,game:v}=c;a==null||a.emit("leave_game",{username:P,gameName:v==null?void 0:v.name,recoverTiles:n}),fe(Ue,c={},c),fe(nt,f=[],f),fe(st,n=null,n)}const b=new URLSearchParams(window.location.search);b.has("game")&&e(1,N=b.get("game"))}),bt(()=>{clearInterval(k)});function M(){clearInterval(k);const b=async()=>{const P=await fetch(He+"/api/games");e(5,O=await P.json())};k=setInterval(b,15e3),b()}const oe=b=>{e(6,D=!0);let[P,v]=N.split("|");if(P==""||h=="")ue.error("Please select a game and enter a username"),e(6,D=!1);else{e(0,h=h.charAt(0).toUpperCase()+h.slice(1));let ae={username:h,game:{name:P,lang:v}};fe(Ue,c=ae,c),a.emit("join_game",{username:ae.username,game:ae.game}),a.on("join_reply",Q=>{Q.status=="fail"?(ue.error(Q.message),e(6,D=!1)):Q.status=="success"&&xt("/game")})}},L=async b=>{if(b.preventDefault(),y==""||p==""){ue.error("Please enter a username and game name");return}e(0,h=y.charAt(0).toUpperCase()+y.slice(1)),e(3,p=p.charAt(0).toUpperCase()+p.slice(1)),e(1,N=`${p}|${g}`);try{let v=await(await fetch(He+"/api/games/add",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:p,created_by:h,lang:g,use_scrabble_dictionary:Tt})})).json();v.status=="fail"?ue.warning(v.error):oe()}catch{ue.error("Error Communicating with the Server")}};function he(){h=this.value,e(0,h)}function ie(){N=Ye(this),e(1,N),e(5,O)}function j(){y=this.value,e(2,y)}function ce(){p=this.value,e(3,p)}function K(){g=Ye(this),e(4,g)}return[h,N,y,p,g,O,D,oe,L,he,ie,j,ce,K]}class yt extends pt{constructor(t){super(),ht(this,t,St,Et,ft,{})}}function Lt(s){let t,e,a,c;return t=new Ct({props:{richColors:!0,position:"bottom-center"}}),a=new yt({}),{c(){Ze(t.$$.fragment),e=T(),Ze(a.$$.fragment)},l(n){$e(t.$$.fragment,n),e=S(n),$e(a.$$.fragment,n)},m(n,f){et(t,n,f),pe(n,e,f),et(a,n,f),c=!0},p:xe,i(n){c||(tt(t.$$.fragment,n),tt(a.$$.fragment,n),c=!0)},o(n){lt(t.$$.fragment,n),lt(a.$$.fragment,n),c=!1},d(n){n&&d(e),at(t,n),at(a,n)}}}function Nt(s,t,e){let a;return me(s,Ge,c=>e(0,a=c)),fe(Ge,a=kt.connect(He,{transports:["websocket","polling"]}),a),[]}class Mt extends pt{constructor(t){super(),ht(this,t,Nt,Lt,ft,{})}}export{Mt as component};
